<% stars = @product.stars %>
<% reviews_count  = product.reviews_count %>
<% raiting_five   = product.reviews.raiting_five * 100 /reviews_count %>
<% raiting_four   = product.reviews.raiting_four * 100 /reviews_count %>
<% raiting_three  = product.reviews.raiting_three * 100 /reviews_count %>
<% raiting_two    = product.reviews.raiting_two * 100 /reviews_count %>
<% raiting_one    = product.reviews.raiting_one * 100 /reviews_count %>
<div class="ratings">
  <p class="product-review-description">
    Let us know your thoughts on a product or view reviews from our members,
    independent experts and other websites.
  </p>
  <div class="d-flex">
    <p class="ratings-stars product-review-rating-stars">
      <%= @product.stars %>
      <span title="<%= txt_stars(stars) %>">
        <%= render 'spree/reviews/stars', stars: stars %>
      </span>
    </p>
  </div>
  <p class="ratings-basedupon product-review-basedupon"><%= Spree.t(:based_upon_review_count, count: reviews_count) %></p>

  <div class="product-review-bars">
    <div class="product-review-bar">
      <p class="mb-0 mr-3">5</p>  
      <div class="progress product-review-progress-bar">
        <div class="progress-bar bg-warning" role="progressbar" style="width: <%= raiting_five %>%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <p class="mb-0"><%= raiting_five %>%</p>
    </div>
    <div class="product-review-bar">
      <p class="mb-0 mr-3">4</p>  
      <div class="progress product-review-progress-bar">
        <div class="progress-bar bg-warning" role="progressbar" style="width: <%= raiting_four %>%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <p class="mb-0"><%= raiting_four %>%</p>
    </div>
    <div class="product-review-bar">
      <p class="mb-0 mr-3">3</p>  
      <div class="progress product-review-progress-bar">
        <div class="progress-bar bg-warning" role="progressbar" style="width: <%= raiting_three %>%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <p class="mb-0"><%= raiting_three %>%</p>
    </div>
    <div class="product-review-bar">
      <p class="mb-0 mr-3">2</p>  
      <div class="progress product-review-progress-bar">
        <div class="progress-bar bg-warning" role="progressbar" style="width: <%= raiting_two  %>%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <p class="mb-0"><%= raiting_two %>%</p>
    </div>
    <div class="product-review-bar">
      <p class="mb-0 mr-3">1</p>  
      <div class="progress product-review-progress-bar">
        <div class="progress-bar bg-warning" role="progressbar" style="width: <%= raiting_one %>%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
      <p class="mb-0"><%= raiting_one %>%</p>
    </div>
  </div>


  <div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
    <span itemprop="ratingValue" content="<%= stars %>"></span>
    <span itemprop="reviewCount" content="<%= reviews_count %>"></span>
  </div>
</div> 